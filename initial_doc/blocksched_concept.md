# BlockSched コンセプトドキュメント（v1.2）

## 1. 目的
予定に追われるのではなく、**空き時間を「作業枠（ブロック）」として確保し、ポモドーロで実行し、割り込み・未完も自動で吸収**して、どの働き方でも **計画→実行→再計画→振り返り**が回る状態を作る。

## 2. 前提（本プロダクトの割り切り）
- **Windows 単体で動作**するデスクトップアプリとして提供する（サーバ運用はしない）
- **Google Calendar を時間情報の唯一の真実（Source of Truth）**とする  
  - 予定・ブロック・（必要なら）ルーティーン可視化もカレンダーで一元化
- ルーティーン・テンプレ・ポリシー等の「設定」は **Git で同期**する
- **カレンダー上での外部編集（移動/伸縮/タイトル変更/削除）を許容**する
- ブロックの生成は **「毎朝の自動生成」＋「手動生成」**の両方に対応する
- 同期は **syncToken による差分同期**（Blocksカレンダー中心）を採用する

## 3. 中核概念
### 3.1 ブロック（Block）＝時間の器
- 予定でもタスクでもない、**作業のために確保した時間区間**
- ブロックは **確定度（draft / soft / hard）**を持つ  
  - *soft*：自動生成や提案（予定変更に強い）  
  - *hard*：動かしたくない固定枠

### 3.2 タスク（Task）＝中身（粒）
- タスクは「やることの候補」。ブロックへは **開始時に選ぶ（Just-in-time）**を基本とする  
- 毎日「中身を登録し直す」手間を削減し、予定変動にも強くする

### 3.3 ポモドーロ（Pomodoro）＝実行ログ
- 実績（集中/休憩/中断/再開）を自動記録し、入力コストを最小化
- 高頻度ログをカレンダーに大量に書かない（集計のみ反映する方針）

## 4. UX の基本思想（入力負担を増やさない）
- 計画は「毎日ゼロから作る」ではなく、**週次/テンプレ**と**日次30秒の承認**へ
- 日々の変動は「中断→再配置」「未完→繰り越し/分割」で吸収
- ユーザーがカレンダーで編集しても破綻しない（カレンダーが正）

## 5. 働き方非依存にする方法
- 働き方の違いは「時間の制約（カレンダー/勤務窓）」として観測できる
- 意思決定は **ポリシー（最小パラメータ）**として差し替え可能
- パラメータは **推定（observed/estimated）＋ユーザー上書き（soft/hard/temporary）**を両立  
  - ユーザーに設定地獄を強いず、必要な項目だけ上書きできる

## 6. セキュリティ/運用の基本方針（サーバなし前提）
- OAuth トークン等の機密は **ローカル安全領域**（Windows Credential Manager/DPAPI 等）に保存し、Gitには載せない
- Gitで同期するのは **設定（テンプレ・ルーティーン・ポリシー・ユーザー上書き）**のみ
- Google Calendar は「時間」に関する情報を管理し、機微な詳細ログはローカルに留める

## 7. 成功指標（v1）
- 毎日のブロック生成〜確認までが **30秒以内**で回る
- 予定変更や外部編集があっても **重複生成/勝手な復活が起きない**
- 「次にやること」を迷う回数が減り、ポモドーロ実績が継続して記録される
